# VERSION: a9a3cf7
# THIS FILE IS AUTOGENERATED - DO NOT EDIT
# Source: https://github.com/Software-Automation-Holdings-LLC/developer-common/blob/b7889e056e06316664b15f27fe9c6577cb3fba77/github-workflow-templates/code-scanning-to-linear.yml

name: Code Scanning to Linear

on:
  # Run on schedule to catch new alerts
  schedule:
    - cron: "0 */6 * * *" # Every 6 hours

  # Allow manual trigger for single alert or all
  workflow_dispatch:
    inputs:
      alert_number:
        description: "Alert number to process (leave empty for all open alerts)"
        required: false
        type: string
      dry_run:
        description: "Dry run - check without creating tickets"
        required: false
        type: boolean
        default: false

# Restrict default permissions - expanded at job level
permissions: {}

# Only allow one ticket creation run at a time per repo
concurrency:
  group: code-scanning-linear-${{ github.repository }}
  cancel-in-progress: false # Don't cancel - queue instead

jobs:
  create-tickets:
    permissions:
      contents: read
      security-events: read
    uses: Software-Automation-Holdings-LLC/developer-common/.github/workflows/code-scanning-to-linear.yml@b7889e056e06316664b15f27fe9c6577cb3fba77
    with:
      alert_number: ${{ inputs.alert_number || '0' }}
      dry_run: ${{ inputs.dry_run || false }}
    secrets:
      LINEAR_API_KEY: ${{ secrets.LINEAR_API_KEY }}
      DEV_BOT_APP_ID: ${{ secrets.DEV_BOT_APP_ID }}
      DEV_BOT_PRIVATE_KEY: ${{ secrets.DEV_BOT_PRIVATE_KEY }}
