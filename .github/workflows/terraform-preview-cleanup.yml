# VERSION: fc6ce9a
# THIS FILE IS AUTOGENERATED - DO NOT EDIT
# Source: https://github.com/Software-Automation-Holdings-LLC/developer-common/blob/968d7b9ece8ab9b8aa66832b63567e3ca34c458a/github-workflow-templates/terraform-preview-cleanup.yml

# NOTE: This workflow requires terraform/preview/*.tf files to function.
# If no terraform files exist, the workflow will skip gracefully.

name: Cleanup Preview

on:
  pull_request:
    types: [closed]
  workflow_dispatch:
    inputs:
      pr_number:
        description: "PR number to cleanup"
        required: true
        type: string

concurrency:
  group: terraform-preview-${{ github.event.pull_request.number || github.event.inputs.pr_number }}
  cancel-in-progress: false

# Restrict default permissions - expanded at job level
permissions: {}

jobs:
  cleanup:
    permissions:
      id-token: write
      contents: read
    uses: Software-Automation-Holdings-LLC/developer-common/.github/workflows/terraform-preview-cleanup.yml@968d7b9ece8ab9b8aa66832b63567e3ca34c458a
    with:
      pr_number: ${{ github.event.pull_request.number || github.event.inputs.pr_number }}
    secrets:
      DEV_BOT_APP_ID: ${{ secrets.DEV_BOT_APP_ID }}
      DEV_BOT_PRIVATE_KEY: ${{ secrets.DEV_BOT_PRIVATE_KEY }}
